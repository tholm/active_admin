<<<<<<< HEAD
Then /^I should see the scope "([^"]*)"$/ do |name|
  page.should have_css(".scopes .scope", :text => name)
end

Then /^I should not see the scope "([^"]*)"$/ do |name|
  page.should_not have_css(".scopes .scope", :text => name)
end

Then /^I should see the scope "([^"]*)" selected$/ do |name|
  page.should have_css(".scopes .scope.active", :text => name)
=======
Then /^I should( not)? see the scope "([^"]*)"( selected)?$/ do |negate, name, selected|
  should = "I should#{' not' if negate}"
  scope = ".scopes#{' .selected' if selected}"
  step %{#{should} see "#{name}" within "#{scope}"}
>>>>>>> refs/heads/master
end

Then /^I should see the scope "([^"]*)" not selected$/ do |name|
  page.should have_css(".scopes .scope", :text => name)
  page.should_not have_css('.scopes .active', :text => name)
end

Then /^I should see the scope "([^"]*)" with the count (\d+)$/ do |name, count|
<<<<<<< HEAD
  step %{I should see "#{count}" within ".scopes .scope-#{name.gsub(" ", "").underscore.downcase} .count"}
end

Then /^I should see the scope "([^"]*)" with no count$/ do |name|
  page.should have_css(".scopes .scope-#{name.gsub(" ", "").underscore.downcase}")
  page.should_not have_css(".scopes .scope-#{name.gsub(" ", "").underscore.downcase} .count")
end

Then /^I should see (\d+) ([\w]*) in the table$/ do |count, resource_type|
  begin
    page.should have_css("table#index_table_#{resource_type} tr > td:first", :count => count.to_i)
  rescue
    current_count = 0

    all("table#index_table_#{resource_type} tr > td:first").each { current_count += 1 }

    raise "There were #{current_count} rows in the table not #{count}"
  end
=======
  name = name.gsub(' ','').underscore.downcase
  step %{I should see "#{count}" within ".scopes .#{name} .count"}
end

Then /^I should see the scope "([^"]*)" with no count$/ do |name|
  name = name.gsub(" ", "").underscore.downcase
  page.should     have_css(".scopes .#{name}")
  page.should_not have_css(".scopes .#{name} .count")
>>>>>>> refs/heads/master
end
